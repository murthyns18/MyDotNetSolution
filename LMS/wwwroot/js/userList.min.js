function actionFormatter(n,t,i){return`
        <div class="text-nowrap">
            <button class="btn btn-sm btn-warning me-1 btn-edit" data-id="${i.userID}">
                <i class="bi bi-pencil-square"></i>
            </button>
            <button class="btn btn-sm btn-danger btn-delete"
                    data-id="${i.userID}" data-name="${i.userName}">
                <i class="bi bi-trash"></i>
            </button>
        </div>`}function statusFormatter(n){return typeof isExport!="undefined"&&isExport?n?"Active":"Inactive":n?"<span class='badge bg-success'>Active<\/span>":"<span class='badge bg-danger'>Inactive<\/span>"}function openAddUserModal(){$("#userForm")[0].reset();$("#UserID").val(0);$("#CountryId, #StateId, #CityId").val("");$("#stateColumn, #cityColumn").addClass("d-none");loadCountries();$("#passwordContainer, #confirmPasswordContainer").removeClass("d-none");$("#statusContainer").addClass("d-none");$("#userModalTitle").text("Add User");$("#userModal").modal("show")}function openEditUserModal(n){$.get("/User/EditUser",{userID:n}).done(function(n){$("#UserID").val(n.userID);$("#UserName").val(n.userName);$("#Email").val(n.email);$("#MobileNumber").val(n.mobileNumber);$("#Address").val(n.address);$("#RoleID").val(n.roleID);$('input[name="Status"][value="'+n.status+'"]').prop("checked",!0);$("#CountryId, #StateId, #CityId").val("");$("#stateColumn, #cityColumn").addClass("d-none");loadCountries();setTimeout(()=>{$('#countryList li[data-id="'+n.countryId+'"]').trigger("click"),setTimeout(()=>{$('#stateList li[data-id="'+n.stateId+'"]').trigger("click"),setTimeout(()=>{$('#cityList li[data-id="'+n.cityId+'"]').addClass("active"),$("#CityId").val(n.cityId)},300)},300)},300);$("#passwordContainer, #confirmPasswordContainer").addClass("d-none");$("#statusContainer").removeClass("d-none");$("#userModalTitle").text("Edit User");$("#userModal").modal("show")}).fail(()=>App.alert("Failed to load user details."))}function deleteUser(n,t){confirm(`Are you sure you want to delete "${t}"?`,function(){$.ajax({url:"/User/DeleteUser",type:"POST",data:{id:n,__RequestVerificationToken:$('input[name="__RequestVerificationToken"]').val()},success:t=>{App.alert(t.message),$("#userGrid").jqGrid("delRowData",n)},error:()=>App.alert("Delete failed")})})}function getRoleFilter(){let n=":All";return $.ajax({url:apiURL+"Role/GetRoles",data:{roleId:-1},"async":!1,beforeSend:n=>n.setRequestHeader("Authorization","Bearer "+TOKEN),success:t=>{t.forEach(t=>{n+=`;${t.roleName}:${t.roleName}`})}}),n}function loadCountries(){$.ajax({url:apiURL+"User/GetCountries",beforeSend:n=>n.setRequestHeader("Authorization","Bearer "+TOKEN),success:function(n){let t="";n.forEach(n=>{t+=`<li data-id="${n.countryId}">${n.countryName}</li>`});$("#countryList").html(t)}})}$(document).on("click",".btn-edit",function(){openEditUserModal($(this).data("id"))});$(document).on("click",".btn-delete",function(){deleteUser($(this).data("id"),$(this).data("name"))});$(function(){const n=[{label:"Action",name:"action",width:90,align:"center",formatter:actionFormatter,search:!1},{name:"userID",key:!0,hidden:!0},{label:"Name",name:"userName",width:150},{label:"Email",name:"email",width:220},{label:"Mobile",name:"mobileNumber",width:120,align:"right"},{label:"Role",name:"roleName",width:150,stype:"select",searchoptions:{value:getRoleFilter(),sopt:["eq"]}},{label:"Address",name:"address",width:200},{label:"Status",name:"status",width:90,align:"center",formatter:statusFormatter,stype:"select",searchoptions:{value:":All;true:Active;false:Inactive",sopt:["eq"]}}];App.CreateJQGrid("#userGrid",apiURL+"User/UserList","json",[],n,TOKEN,!0,!1,"55vh")});submitModalForm({formSelector:"#userForm",modalSelector:"#userModal",onSuccess:function(n){if(n.data){const t=n.data.userID;$("#UserID").val()==0?$("#userGrid").jqGrid("addRowData",t,n.data,"first"):$("#userGrid").jqGrid("setRowData",t,n.data)}}});$("#countryList").on("click","li",function(){const n=$(this).data("id");$("#CountryId").val(n);$("#countryList li").removeClass("active");$(this).addClass("active");$("#stateColumn").removeClass("d-none");$("#cityColumn").addClass("d-none");$("#StateId, #CityId").val("");$.ajax({url:apiURL+"User/GetStates",data:{countryId:n},beforeSend:n=>n.setRequestHeader("Authorization","Bearer "+TOKEN),success:function(n){let t="";n.forEach(n=>{t+=`<li data-id="${n.stateId}">${n.stateName}</li>`});$("#stateList").html(t)}})});$("#stateList").on("click","li",function(){const n=$(this).data("id");$("#StateId").val(n);$("#stateList li").removeClass("active");$(this).addClass("active");$("#cityColumn").removeClass("d-none");$("#CityId").val("");$.ajax({url:apiURL+"User/GetCities",data:{stateId:n},beforeSend:n=>n.setRequestHeader("Authorization","Bearer "+TOKEN),success:function(n){let t="";n.forEach(n=>{t+=`<li data-id="${n.cityId}">${n.cityName}</li>`});$("#cityList").html(t)}})});$("#cityList").on("click","li",function(){$("#CityId").val($(this).data("id"));$("#cityList li").removeClass("active");$(this).addClass("active")});
//# sourceMappingURL=userList.min.js.map