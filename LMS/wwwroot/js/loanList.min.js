function actionFormatter(n,t,i){let r=`
        <div class="text-nowrap">
            <button class="btn btn-sm btn-danger btn-delete me-1"
                    data-id="${i.loanId}" data-user="${i.userName}">
                <i class="bi bi-trash"></i>
            </button>
    `;return i.status==="Active"&&(r+=`
            <button class="btn btn-sm btn-success btn-return"
                    data-id="${i.loanId}" data-user="${i.userName}">
                <i class="bi bi-arrow-return-left"></i>
            </button>
        `),r+`</div>`}function statusFormatter(n){return isExport?n:n==="Closed"?"<span class='badge bg-secondary'>Closed<\/span>":"<span class='badge bg-success'>Active<\/span>"}function dateFormatter(n){if(!n)return"<span class='text-danger fw-semibold'>Not Returned<\/span>";const t=new Date(n);return isNaN(t)?"<span class='text-danger fw-semibold'>Not Returned<\/span>":t.toLocaleDateString("en-GB")}function deleteLoan(n,t){confirm(`Are you sure you want to delete this loan? "${t}"`,function(){$.ajax({url:"/Loan/DeleteLoan",type:"POST",data:{loanId:n,__RequestVerificationToken:$('input[name="__RequestVerificationToken"]').val()},success:function(n){App.alert(n.message);reloadLoanGrid()},error:function(){App.alert("Delete failed")}})})}function returnLoan(n,t){confirm(`Return loan for "${t}"?`,function(){$.ajax({url:"/Loan/ReturnLoan",type:"POST",data:{loanId:n,__RequestVerificationToken:$('input[name="__RequestVerificationToken"]').val()},success:function(t){App.alert(t.message);$("#loanGrid").jqGrid("delRowData",n)},error:function(){App.alert("Return failed")}})})}function openAddLoanModal(){selectedBooks=[];$("#loanDetailsContainer").empty();$("#tblSelectedBooks tbody").html(`
        <tr>
            <td colspan="4" class="text-center text-muted">
                No books added
            </td>
        </tr>
    `);$("#loanModal").modal("show")}$(document).on("click",".btn-delete",function(){deleteLoan($(this).data("id"),$(this).data("user"))});$(document).on("click",".btn-return",function(){returnLoan($(this).data("id"),$(this).data("user"))});$(function(){const n=[{label:"Action",name:"action",width:120,align:"center",sortable:!1,search:!1,exportcol:!1,formatter:actionFormatter},{name:"loanId",key:!0,hidden:!0},{label:"User Name",name:"userName",width:150},{label:"Total Qty",name:"totalQty",width:80,align:"right"},{label:"Loan Date",name:"loanDate",width:110,align:"center",formatter:dateFormatter},{label:"Due Date",name:"dueDate",width:110,align:"center",formatter:dateFormatter},{label:"Return Date",name:"returnDate",width:130,align:"center",formatter:dateFormatter},{label:"Status",name:"status",width:120,align:"center",formatter:statusFormatter,stype:"select",searchoptions:{value:":All;Active:Active;Closed:Closed"}}];App.CreateJQGrid("#loanGrid",apiURL+"Loan/LoanList?loanId=0","json",[],n,TOKEN,!0,!1,"55vh");$("#loanGrid").jqGrid("filterToolbar",{searchOnEnter:!1,defaultSearch:"cn",stringResult:!0})});
//# sourceMappingURL=loanList.min.js.map